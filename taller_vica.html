<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

        <meta name="author" content="Pablo Fernández, Javier González y Celia Talaván" />
    
        <meta name="date" content="2024-11-19" />
    
    <title>Validación de Coordenadas Geográficas</title>

        <script src="taller_vica_files/header-attrs-2.22/header-attrs.js"></script>
        <script src="taller_vica_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="taller_vica_files/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
        <script src="taller_vica_files/bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="taller_vica_files/navigation-1.1/tabsets.js"></script>
        <link href="taller_vica_files/readthedown-0.1/readthedown.css" rel="stylesheet" />
        <link href="taller_vica_files/readthedown-0.1/readthedown_fonts_embed.css" rel="stylesheet" />
        <script src="taller_vica_files/readthedown-0.1/readthedown.js"></script>
        <script src="taller_vica_files/kePrint-0.0.1/kePrint.js"></script>
        <link href="taller_vica_files/lightable-0.0.1/lightable.css" rel="stylesheet" />
    
    
        <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
    
        <link rel="stylesheet" href="custom.css" type="text/css" />
    
    <!-- tabsets -->
    <script>
      $(document).ready(function () {
	  window.buildTabsets("toc");
      });
      $(document).ready(function () {
	  $('.tabset-dropdown > .nav-tabs > li').click(function () {
	      $(this).parent().toggleClass('nav-tabs-open')
	  });
      });
    </script>

    <!-- code folding -->
    
    <!-- code download -->
    
    <!-- tabsets dropdown -->

    <style type="text/css">
      .tabset-dropdown > .nav-tabs {
	  display: inline-table;
	  max-height: 500px;
	  min-height: 44px;
	  overflow-y: auto;
	  background: white;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }
      
      .tabset-dropdown > .nav-tabs > li.active:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
	  content: "&#xe258;";
	  border: none;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs > li.active {
	  display: block;
      }

      .tabset-dropdown > .nav-tabs > li.active a {
  	  padding: 0 15px !important;
      }

      .tabset-dropdown > .nav-tabs > li > a,
      .tabset-dropdown > .nav-tabs > li > a:focus,
      .tabset-dropdown > .nav-tabs > li > a:hover {
	  border: none;
	  display: inline-block;
	  border-radius: 4px;
	  background-color: transparent;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li {
	  display: block;
	  float: none;
      }
      
      .tabset-dropdown > .nav-tabs > li {
	  display: none;
	  margin-left: 0 !important;
      }
    </style>
    
</head>

<body class="preload">

   	
         <!-- readthedown start -->   
   <div id="content" data-toggle="wy-nav-shift">
     <nav id="nav-top" role="navigation" aria-label="top navigation">
       <a role="button" href="#" data-toggle="wy-nav-top"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
     </nav>
         
   
        
      <h1 class="title">Validación de Coordenadas Geográficas</h1>
      
         <!-- readthedown authors -->
   <div id="sidebar">
    <h2><a href="#content">Validación de Coordenadas
Geográficas</a></h2>
    <div id="toc">
      <ul>
      <li><a href="#material" id="toc-material">Material</a></li>
      <li><a href="#estructura-del-taller"
      id="toc-estructura-del-taller"><strong>Estructura del
      taller</strong></a></li>
      <li><a
      href="#instalación-de-paquetes-de-r-necesarios-para-el-taller"
      id="toc-instalación-de-paquetes-de-r-necesarios-para-el-taller">1.
      Instalación de paquetes de R necesarios para el Taller</a></li>
      <li><a href="#importación-de-direcciones-geocodificadas"
      id="toc-importación-de-direcciones-geocodificadas">2. Importación
      de direcciones geocodificadas</a></li>
      <li><a href="#conversión-a-datos-espaciales"
      id="toc-conversión-a-datos-espaciales">3. Conversión a datos
      espaciales</a></li>
      <li><a href="#creación-de-kmls" id="toc-creación-de-kmls">4.
      Creación de kmls</a></li>
      <li><a href="#validacion-con-google-earth-cartociudad"
      id="toc-validacion-con-google-earth-cartociudad">5. Validacion con
      Google Earth (+ Cartociudad)</a></li>
      <li><a href="#importacion-de-direcciones-validadas"
      id="toc-importacion-de-direcciones-validadas">6. Importacion de
      direcciones validadas</a></li>
      <li><a href="#evaluación-de-la-validación"
      id="toc-evaluación-de-la-validación">7. Evaluación de la
      validación</a></li>
      <li><a
      href="#evaluación-de-la-geocodificacion-original-mediante-distancias"
      id="toc-evaluación-de-la-geocodificacion-original-mediante-distancias">8.
      Evaluación de la geocodificacion original mediante
      distancias</a></li>
      <li><a href="#exportación-de-direcciones-validadas"
      id="toc-exportación-de-direcciones-validadas">9. Exportación de
      direcciones validadas</a></li>
      <li><a href="#license" id="toc-license">License</a></li>
      </ul>
    </div>
    <div id="postamble" data-toggle="wy-nav-shift" class="status">
                  <p class="author"><span class="glyphicon glyphicon-user"></span> Pablo
Fernández, Javier González y Celia Talaván</p>
                        <p class="date"><span class="glyphicon glyphicon-calendar"></span> 2024-11-19</p>
          </div>
   </div>
     

   
      
   
<!-- Don't indent these lines or it will mess pre blocks indentation --> 
<div id="main">
<div id="material" class="section level2">
<h2>Material</h2>
<p>Descarga del material en <a
href="https://github.com/biodama/TALLER_VICA_VALIDACION">GitHub</a></p>
</div>
<div id="estructura-del-taller" class="section level2">
<h2><strong>Estructura del taller</strong></h2>
<p>1.Instalación de paquetes de R necesarios para el Taller</p>
<p>2.Importación de direcciones geocodificadas</p>
<p>3.Conversión a datos espaciales</p>
<p>4.Creación de kmls</p>
<p>5.Validacion con Google Earth (+ Cartociudad)</p>
<p>6.Importacion de direcciones validadas</p>
<p>7.Evaluación de la validación</p>
<p>8.Evaluación de la geocodificacion original mediante distancias</p>
<p>9.Exportación de direcciones validadas</p>
</div>
<div id="instalación-de-paquetes-de-r-necesarios-para-el-taller"
class="section level2">
<h2>1. Instalación de paquetes de R necesarios para el Taller</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;scales&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tmaptools&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tmap&quot;</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;sp&quot;</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;rgdal&quot;</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;kableExtra&quot;</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>)</span></code></pre></div>
</div>
<div id="importación-de-direcciones-geocodificadas"
class="section level2">
<h2>2. Importación de direcciones geocodificadas</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;openxlsx&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">read.xlsx</span>(<span class="st">&quot;datos_para_validar.xlsx&quot;</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(datos)</span></code></pre></div>
<pre><code>## [1] 15 10</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos[,<span class="fu">c</span>(<span class="st">&quot;ID&quot;</span>,<span class="st">&quot;lat&quot;</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;long&quot;</span>,<span class="st">&quot;MUNICIPIO&quot;</span>)])</span></code></pre></div>
<pre><code>##             ID              lat              long             MUNICIPIO
## 1 101310252492 39.8917005520389 -5.54059461444984 Navalmoral de la Mata
## 2 101310099116 39.8923809620118 -5.53990495944629 Navalmoral de la Mata
## 3 101310252352 39.8924218622791 -5.54235640882115 Navalmoral de la Mata
## 4 101310252684 39.8936756512104 -5.53923222968359 Navalmoral de la Mata
## 5 101310001539 39.8919308369386 -5.54131087859412 Navalmoral de la Mata
## 6 101310252013        39.890796         -5.536885 Navalmoral de la Mata</code></pre>
</div>
<div id="conversión-a-datos-espaciales" class="section level2">
<h2>3. Conversión a datos espaciales</h2>
<p><a
href="https://www.mapa.gob.es/es/cartografia-y-sig/ide/directorio_datos_servicios/EPSG.aspx"
class="uri">https://www.mapa.gob.es/es/cartografia-y-sig/ide/directorio_datos_servicios/EPSG.aspx</a></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># EPSG:4326 </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(<span class="dv">4326</span>)</span></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: EPSG:4326 
##   wkt:
## GEOGCRS[&quot;WGS 84&quot;,
##     ENSEMBLE[&quot;World Geodetic System 1984 ensemble&quot;,
##         MEMBER[&quot;World Geodetic System 1984 (Transit)&quot;],
##         MEMBER[&quot;World Geodetic System 1984 (G730)&quot;],
##         MEMBER[&quot;World Geodetic System 1984 (G873)&quot;],
##         MEMBER[&quot;World Geodetic System 1984 (G1150)&quot;],
##         MEMBER[&quot;World Geodetic System 1984 (G1674)&quot;],
##         MEMBER[&quot;World Geodetic System 1984 (G1762)&quot;],
##         MEMBER[&quot;World Geodetic System 1984 (G2139)&quot;],
##         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##             LENGTHUNIT[&quot;metre&quot;,1]],
##         ENSEMBLEACCURACY[2.0]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS[&quot;geodetic latitude (Lat)&quot;,north,
##             ORDER[1],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         AXIS[&quot;geodetic longitude (Lon)&quot;,east,
##             ORDER[2],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     USAGE[
##         SCOPE[&quot;Horizontal component of 3D system.&quot;],
##         AREA[&quot;World.&quot;],
##         BBOX[-90,-180,90,180]],
##     ID[&quot;EPSG&quot;,4326]]</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># st_as_sf</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>datos_sf <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_as_sf</span>(datos,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;long&quot;</span>,<span class="st">&quot;lat&quot;</span>),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">crs =</span> <span class="dv">4326</span>)</span></code></pre></div>
</div>
<div id="creación-de-kmls" class="section level2">
<h2>4. Creación de kmls</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># st_write</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(datos_sf, <span class="st">&quot;datos_para_validar.kml&quot;</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">driver =</span> <span class="st">&quot;kml&quot;</span>, <span class="at">delete_dsn =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Deleting source `datos_para_validar.kml&#39; using driver `kml&#39;
## Writing layer `datos_para_validar&#39; to data source 
##   `datos_para_validar.kml&#39; using driver `kml&#39;
## Writing 15 features with 8 fields and geometry type Point.</code></pre>
</div>
<div id="validacion-con-google-earth-cartociudad"
class="section level2">
<h2>5. Validacion con Google Earth (+ Cartociudad)</h2>
<div>
<p><a href="https://www.google.es/intl/es/earth/index.html" target="_blank">
<img src="GoogleEarth.jpg" alt="Descripción de la imagen" style="width:300px; margin-left:50px;">
</a> <a href="https://www.cartociudad.es/web/portal" target="_blank">
<img src="carto.png" alt="Descripción de la imagen" style="width:350px; margin-left:150px;">
</a></p>
</div>
</div>
<div id="importacion-de-direcciones-validadas" class="section level2">
<h2>6. Importacion de direcciones validadas</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;openxlsx&quot;</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;gtsummary&quot;</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;kableExtra&quot;</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(datos)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
ID
</th>
<th style="text-align:left;">
TIPO_VIA
</th>
<th style="text-align:left;">
DIRECCION
</th>
<th style="text-align:right;">
NUM
</th>
<th style="text-align:left;">
CP
</th>
<th style="text-align:left;">
COD_MUNI
</th>
<th style="text-align:left;">
MUNICIPIO
</th>
<th style="text-align:left;">
PROVINCIA
</th>
<th style="text-align:left;">
lat
</th>
<th style="text-align:left;">
long
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
101310252492
</td>
<td style="text-align:left;">
PLAZA
</td>
<td style="text-align:left;">
ESPAÑA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8917005520389
</td>
<td style="text-align:left;">
-5.54059461444984
</td>
</tr>
<tr>
<td style="text-align:left;">
101310099116
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
LEPANTO
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8923809620118
</td>
<td style="text-align:left;">
-5.53990495944629
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252352
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
GOYA
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8924218622791
</td>
<td style="text-align:left;">
-5.54235640882115
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252684
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
AMAPOLA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8936756512104
</td>
<td style="text-align:left;">
-5.53923222968359
</td>
</tr>
<tr>
<td style="text-align:left;">
101310001539
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
LUCHANA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8919308369386
</td>
<td style="text-align:left;">
-5.54131087859412
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252013
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
PUERTO LAPICE
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.890796
</td>
<td style="text-align:left;">
-5.536885
</td>
</tr>
<tr>
<td style="text-align:left;">
101310231851
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
SAN ANDRES
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8904526051037
</td>
<td style="text-align:left;">
-5.54406190563242
</td>
</tr>
<tr>
<td style="text-align:left;">
101310158144
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
CALVO SOTELO
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8939985258114
</td>
<td style="text-align:left;">
-5.5412597242568
</td>
</tr>
<tr>
<td style="text-align:left;">
101310235801
</td>
<td style="text-align:left;">
PASEO
</td>
<td style="text-align:left;">
ESTACION
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8928495816429
</td>
<td style="text-align:left;">
-5.54523156568416
</td>
</tr>
<tr>
<td style="text-align:left;">
101310071395
</td>
<td style="text-align:left;">
AVENIDA
</td>
<td style="text-align:left;">
ANGUSTIAS
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.892185
</td>
<td style="text-align:left;">
-5.531003
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252371
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
MODESTO MARCOS
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.894038
</td>
<td style="text-align:left;">
-5.536083
</td>
</tr>
<tr>
<td style="text-align:left;">
101310174431
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
JAZMIN
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8919167400655
</td>
<td style="text-align:left;">
-5.53701616166649
</td>
</tr>
<tr>
<td style="text-align:left;">
101310251600
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
JOAQUIN COSTA
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8906135765554
</td>
<td style="text-align:left;">
-5.54129102426134
</td>
</tr>
<tr>
<td style="text-align:left;">
101310251864
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
DEPORTES
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8880029606681
</td>
<td style="text-align:left;">
-5.53929996212349
</td>
</tr>
<tr>
<td style="text-align:left;">
101310189715
</td>
<td style="text-align:left;">
CARRETERA
</td>
<td style="text-align:left;">
JARANDILLA
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.897994
</td>
<td style="text-align:left;">
-5.54358
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># n_val&lt;-st_read(&quot;datos_para_validar.kml&quot;)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>n_val <span class="ot">&lt;-</span> datos_sf</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(n_val[,<span class="fu">c</span>(<span class="st">&quot;ID&quot;</span>,<span class="st">&quot;geometry&quot;</span>)])</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 1 field
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -5.542356 ymin: 39.8908 xmax: -5.536885 ymax: 39.89368
## Geodetic CRS:  WGS 84
##             ID                   geometry
## 1 101310252492  POINT (-5.540595 39.8917)
## 2 101310099116 POINT (-5.539905 39.89238)
## 3 101310252352 POINT (-5.542356 39.89242)
## 4 101310252684 POINT (-5.539232 39.89368)
## 5 101310001539 POINT (-5.541311 39.89193)
## 6 101310252013  POINT (-5.536885 39.8908)</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Capa validada</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>val<span class="ot">&lt;-</span><span class="fu">st_read</span>(<span class="st">&quot;datos_validados.kml&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `datos_para_validar&#39; from data source 
##   `/Users/celiatalavan/Desktop/CIBER-DATA/TALLERES/VICA/final/datos_validados.kml&#39; 
##   using driver `KML&#39;
## Simple feature collection with 15 features and 2 fields
## Geometry type: POINT
## Dimension:     XYZ
## Bounding box:  xmin: -5.552171 ymin: 39.888 xmax: -5.53699 ymax: 39.89843
## z_range:       zmin: 0 zmax: 0
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>val<span class="ot">&lt;-</span><span class="fu">st_zm</span>(val, <span class="at">drop =</span> <span class="cn">TRUE</span>, <span class="at">what =</span> <span class="st">&quot;ZM&quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(val)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 2 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -5.542356 ymin: 39.88816 xmax: -5.53699 ymax: 39.89368
## Geodetic CRS:  WGS 84
##           Name Description                   geometry
## 1 101310252492         VAL  POINT (-5.54091 39.89156)
## 2 101310099116         VAL POINT (-5.539872 39.89239)
## 3 101310252352         VAL POINT (-5.542356 39.89242)
## 4 101310252684         VAL POINT (-5.539232 39.89368)
## 5 101310001539         VAL POINT (-5.541311 39.89193)
## 6 101310252013       NOVAL  POINT (-5.53699 39.88816)</code></pre>
</div>
<div id="evaluación-de-la-validación" class="section level2">
<h2>7. Evaluación de la validación</h2>
<ol style="list-style-type: lower-alpha">
<li>Porcentajes de coordenadas validadas / No validadas / sin Check</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> val <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(Description) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">porcentaje =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Description<span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>Description, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;VAL&quot;</span>,<span class="st">&quot;NOVAL&quot;</span>,<span class="st">&quot;&quot;</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Validados&quot;</span>,<span class="st">&quot;No validados&quot;</span>,<span class="st">&quot;Sin Check&quot;</span>))</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggrepel&quot;</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,<span class="fu">aes</span>(<span class="at">x=</span>Description,<span class="at">y=</span>porcentaje,<span class="at">fill=</span>Description))<span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;#CC1619&quot;</span>,<span class="st">&quot;#579837&quot;</span>,<span class="st">&quot;#7F8A8F&quot;</span>))<span class="sc">+</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>, <span class="at">y=</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span>  </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;N=&quot;</span>,n,<span class="st">&quot; (&quot;</span>,<span class="fu">round</span>(porcentaje, <span class="dv">1</span>), <span class="st">&quot;%)&quot;</span>)), </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">1</span>),<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;&quot;</span>)<span class="sc">+</span>                                        </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)<span class="sc">+</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="taller_vica_files/figure-html/SE-1.png" width="60%"  style="display: block; margin: auto;" /></p>
</div>
<div id="evaluación-de-la-geocodificacion-original-mediante-distancias"
class="section level2">
<h2>8. Evaluación de la geocodificacion original mediante
distancias</h2>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(val)[<span class="dv">1</span>]<span class="ot">&lt;-</span><span class="st">&quot;ID&quot;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>res<span class="ot">&lt;-</span><span class="fu">st_distance</span>(n_val,val)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(res)</span></code></pre></div>
<pre><code>## Units: [m]
##           [,1]       [,2]     [,3]     [,4]      [,5]     [,6]     [,7]
## [1,]  31.22911  98.658619 170.3682 248.4816  66.25639 499.2550 326.7459
## [2,] 125.40403   3.144393 209.1935 154.9817 129.96975 530.8123 414.4347
## [3,] 156.37979 212.012573   0.0000 300.7949 104.58301 658.6512 262.9078
## [4,] 275.56424 152.698136 300.7949   0.0000 262.85059 642.0708 546.0960
## [5,]  53.74429 133.111013 104.5830 262.8506   0.00000 558.0088 286.5403
## [6,] 353.69575 310.580897 500.5822 377.6657 398.12451 292.8448 613.4992
##          [,8]     [,9]     [,10]     [,11]    [,12]    [,13]    [,14]     [,15]
## [1,] 273.8002 415.7204  991.3339 155.50582 306.2414 134.6804 425.7327  843.2094
## [2,] 227.0827 457.4129 1046.5122 221.86975 251.8048 229.3593 489.5411  807.7700
## [3,] 204.3696 249.8599  837.3381  64.83066 459.0510 220.6623 556.2684  709.4904
## [4,] 187.1283 520.0008 1111.9562 339.22334 272.0234 383.1230 630.8019  730.7083
## [5,] 240.3810 349.7444  928.4623  94.16146 366.4074 146.4827 469.2492  793.5155
## [6,] 529.0892 747.8057 1317.3472 485.31231 125.1222 376.4538 372.7033 1103.3019</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>distancia<span class="ot">&lt;-</span><span class="fu">diag</span>(res)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>val<span class="sc">$</span><span class="st">&quot;dist&quot;</span><span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">as.numeric</span>(<span class="fu">diag</span>(res)))</span></code></pre></div>
<ol style="list-style-type: lower-alpha">
<li>Distancias entre coordenadas validadas y originales</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(val[val<span class="sc">$</span><span class="st">&quot;Description&quot;</span><span class="sc">%in%</span><span class="st">&quot;VAL&quot;</span>,],<span class="fu">aes</span>(<span class="at">x=</span>dist))<span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill=</span><span class="st">&quot;#104E8B&quot;</span>,<span class="at">width =</span> <span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Distancia (m)&quot;</span>,<span class="at">y=</span><span class="st">&quot;N&quot;</span>)<span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),<span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>))</span></code></pre></div>
<p><img src="taller_vica_files/figure-html/unnamed-chunk-7-1.png" width="60%"  style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df_val<span class="ot">&lt;-</span><span class="fu">data.table</span>(val[val<span class="sc">$</span><span class="st">&quot;Description&quot;</span><span class="sc">%in%</span><span class="st">&quot;VAL&quot;</span>,])</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>df_t<span class="ot">&lt;-</span>df_val[,.(<span class="at">Media=</span><span class="fu">mean</span>(dist),<span class="at">Mediana=</span><span class="fu">median</span>(dist),<span class="at">Min=</span><span class="fu">min</span>(dist),<span class="at">Max=</span><span class="fu">max</span>(dist),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">Q1=</span><span class="fu">quantile</span>(df_val<span class="sc">$</span>dist,<span class="at">probs=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>))[<span class="dv">2</span>],<span class="at">Q3=</span><span class="fu">quantile</span>(df_val<span class="sc">$</span>dist,<span class="at">probs=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>))[<span class="dv">4</span>])]</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(df_t,<span class="at">align=</span><span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:center;">
Media
</th>
<th style="text-align:center;">
Mediana
</th>
<th style="text-align:center;">
Min
</th>
<th style="text-align:center;">
Max
</th>
<th style="text-align:center;">
Q1
</th>
<th style="text-align:center;">
Q3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
184.7857
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1806
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
26.5
</td>
</tr>
</tbody>
</table>
<ol start="2" style="list-style-type: lower-alpha">
<li>Distancias entre coordenadas no validadas y originales</li>
</ol>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(val[val<span class="sc">$</span><span class="st">&quot;Description&quot;</span><span class="sc">%in%</span><span class="st">&quot;NOVAL&quot;</span>,],<span class="fu">aes</span>(<span class="at">x=</span>dist))<span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill=</span><span class="st">&quot;#104E8B&quot;</span>,<span class="at">width =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">300</span>))<span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>))<span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Distancia (m)&quot;</span>,<span class="at">y=</span><span class="st">&quot;N&quot;</span>)<span class="sc">+</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),<span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>))</span></code></pre></div>
<p><img src="taller_vica_files/figure-html/unnamed-chunk-8-1.png" width="60%"  style="display: block; margin: auto;" /></p>
</div>
<div id="exportación-de-direcciones-validadas" class="section level2">
<h2>9. Exportación de direcciones validadas</h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(val)[<span class="dv">1</span>]<span class="ot">&lt;-</span><span class="st">&quot;ID&quot;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>coordenadas_val<span class="ot">&lt;-</span><span class="fu">st_coordinates</span>(val)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>val<span class="sc">$</span>lat_val<span class="ot">&lt;-</span>coordenadas_val[,<span class="st">&quot;Y&quot;</span>]</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>val<span class="sc">$</span>long_val<span class="ot">&lt;-</span>coordenadas_val[,<span class="st">&quot;X&quot;</span>]</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>val<span class="sc">$</span>geometry<span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>datos_finales<span class="ot">&lt;-</span><span class="fu">as.data.table</span>(<span class="fu">merge</span>(datos,val,<span class="at">by=</span><span class="st">&quot;ID&quot;</span>,<span class="at">all=</span>T,<span class="at">sort=</span><span class="cn">FALSE</span>))</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(datos_finales)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
ID
</th>
<th style="text-align:left;">
TIPO_VIA
</th>
<th style="text-align:left;">
DIRECCION
</th>
<th style="text-align:right;">
NUM
</th>
<th style="text-align:left;">
CP
</th>
<th style="text-align:left;">
COD_MUNI
</th>
<th style="text-align:left;">
MUNICIPIO
</th>
<th style="text-align:left;">
PROVINCIA
</th>
<th style="text-align:left;">
lat
</th>
<th style="text-align:left;">
long
</th>
<th style="text-align:left;">
Description
</th>
<th style="text-align:right;">
dist
</th>
<th style="text-align:right;">
lat_val
</th>
<th style="text-align:right;">
long_val
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
101310252492
</td>
<td style="text-align:left;">
PLAZA
</td>
<td style="text-align:left;">
ESPAÑA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8917005520389
</td>
<td style="text-align:left;">
-5.54059461444984
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
39.89156
</td>
<td style="text-align:right;">
-5.540910
</td>
</tr>
<tr>
<td style="text-align:left;">
101310099116
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
LEPANTO
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8923809620118
</td>
<td style="text-align:left;">
-5.53990495944629
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
39.89239
</td>
<td style="text-align:right;">
-5.539872
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252352
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
GOYA
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8924218622791
</td>
<td style="text-align:left;">
-5.54235640882115
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.89242
</td>
<td style="text-align:right;">
-5.542356
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252684
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
AMAPOLA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8936756512104
</td>
<td style="text-align:left;">
-5.53923222968359
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.89368
</td>
<td style="text-align:right;">
-5.539232
</td>
</tr>
<tr>
<td style="text-align:left;">
101310001539
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
LUCHANA
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8919308369386
</td>
<td style="text-align:left;">
-5.54131087859412
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.89193
</td>
<td style="text-align:right;">
-5.541311
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252013
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
PUERTO LAPICE
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.890796
</td>
<td style="text-align:left;">
-5.536885
</td>
<td style="text-align:left;">
NOVAL
</td>
<td style="text-align:right;">
293
</td>
<td style="text-align:right;">
39.88816
</td>
<td style="text-align:right;">
-5.536990
</td>
</tr>
<tr>
<td style="text-align:left;">
101310231851
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
SAN ANDRES
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8904526051037
</td>
<td style="text-align:left;">
-5.54406190563242
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.89045
</td>
<td style="text-align:right;">
-5.544062
</td>
</tr>
<tr>
<td style="text-align:left;">
101310158144
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
CALVO SOTELO
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8939985258114
</td>
<td style="text-align:left;">
-5.5412597242568
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
39.89409
</td>
<td style="text-align:right;">
-5.541357
</td>
</tr>
<tr>
<td style="text-align:left;">
101310235801
</td>
<td style="text-align:left;">
PASEO
</td>
<td style="text-align:left;">
ESTACION
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8928495816429
</td>
<td style="text-align:left;">
-5.54523156568416
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.89285
</td>
<td style="text-align:right;">
-5.545232
</td>
</tr>
<tr>
<td style="text-align:left;">
101310071395
</td>
<td style="text-align:left;">
AVENIDA
</td>
<td style="text-align:left;">
ANGUSTIAS
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.892185
</td>
<td style="text-align:left;">
-5.531003
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
1806
</td>
<td style="text-align:right;">
39.89247
</td>
<td style="text-align:right;">
-5.552171
</td>
</tr>
<tr>
<td style="text-align:left;">
101310252371
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
MODESTO MARCOS
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.894038
</td>
<td style="text-align:left;">
-5.536083
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
592
</td>
<td style="text-align:right;">
39.89184
</td>
<td style="text-align:right;">
-5.542408
</td>
</tr>
<tr>
<td style="text-align:left;">
101310174431
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
JAZMIN
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8919167400655
</td>
<td style="text-align:left;">
-5.53701616166649
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.89192
</td>
<td style="text-align:right;">
-5.537016
</td>
</tr>
<tr>
<td style="text-align:left;">
101310251600
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
JOAQUIN COSTA
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8906135765554
</td>
<td style="text-align:left;">
-5.54129102426134
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.89061
</td>
<td style="text-align:right;">
-5.541291
</td>
</tr>
<tr>
<td style="text-align:left;">
101310251864
</td>
<td style="text-align:left;">
CALLE
</td>
<td style="text-align:left;">
DEPORTES
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.8880029606681
</td>
<td style="text-align:left;">
-5.53929996212349
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39.88800
</td>
<td style="text-align:right;">
-5.539300
</td>
</tr>
<tr>
<td style="text-align:left;">
101310189715
</td>
<td style="text-align:left;">
CARRETERA
</td>
<td style="text-align:left;">
JARANDILLA
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
10300
</td>
<td style="text-align:left;">
1100003617
</td>
<td style="text-align:left;">
Navalmoral de la Mata
</td>
<td style="text-align:left;">
Cáceres
</td>
<td style="text-align:left;">
39.897994
</td>
<td style="text-align:left;">
-5.54358
</td>
<td style="text-align:left;">
VAL
</td>
<td style="text-align:right;">
142
</td>
<td style="text-align:right;">
39.89843
</td>
<td style="text-align:right;">
-5.545139
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.xlsx</span>(datos_finales,<span class="at">file=</span><span class="st">&quot;datos_finales.xlsx&quot;</span>)</span></code></pre></div>
</div>
<div id="license" class="section level2">
<h2>License</h2>
<p><a
href="https://creativecommons.org/licenses/by-nc-nd/4.0/?ref=chooser-v1">CC
BY-NC-ND 4.0</a></p>
</div>
</div>

   
   
            
      

  <script>
    $(document).ready(function () {

			
 		
	    });
  </script>



    <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
	var script = document.createElement("script");
	script.type = "text/javascript";
	script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
	document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>
  
</body>
</html>
